# CORS
> CORSì— ëŒ€í•´ ì¡°ì‚¬í•˜ê³  ê³µë¶€í•´ ë³´ì•˜ë‹¤.(220101)

## â“`CORS`ë€
- CORS(Cross-Origin Resource Sharing) ë€, ë„ë©”ì¸ì´ë‚˜ ì„œë¸Œë„ë©”ì¸, í”„ë¡œí† ì½œ, í¬íŠ¸ê°€ **ë‹¤ë¥¸ ì¶œì²˜ì˜** ìì›ì„ ìš”ì²­í•˜ëŠ” ë§¤ì»¤ë‹ˆì¦˜ì´ë‹¤.
![](https://images.velog.io/images/songjy377/post/f9bedc31-5db1-48b0-9be8-30f410762864/image.png)
_<[ì¶œì²˜: mozilla](https://developer.mozilla.org/ko/docs/Web/HTTP/CORS)>_
- ì˜ˆì „ì—ëŠ” A ì‚¬ì´íŠ¸ì—ì„œ B ì‚¬ì´íŠ¸ì— ìˆëŠ” ì½˜í…ì¸ ì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ì—ˆë‹¤.
- ê·¸ëŸ¬ë‚˜ ê°œë°œìë“¤ì€ ì´ëŸ° ê¸°ëŠ¥ì„ ì›í–ˆê³ , ê·¸ë˜ì„œ ìƒê²¨ë‚œ ê²ƒì´ CORSì´ë‹¤.

### â“ ì¶œì²˜(Origin)ë€
- URLì˜ scheme(í”„ë¡œí† ì½œ), host(ë„ë©”ì¸), port(í¬íŠ¸)ë¡œ ì •ì˜ëœë‹¤. 
![](https://images.velog.io/images/songjy377/post/13be910b-bf0e-4547-8076-b50a114f5d27/image.png)
  - scheme: http/https
  - host: velog.io
  - port : 88, 9000(HTTPì˜ ê¸°ë³¸ í¬íŠ¸ëŠ” 80)

- ì´ ì„¸ ê°€ì§€ê°€ ëª¨ë‘ ê°™ì€ ê²½ìš° same-originì´ë¼ê³  í•œë‹¤. 
- ì•„ë˜ì˜ ë‘ URLì€ ê°™ì€ ì¶œì²˜ì´ë‹¤.
![](https://images.velog.io/images/songjy377/post/eea82d47-73dd-4cee-ad4e-311c2ec9badb/image.png)
- ì¦‰, ì´ 3ê°€ì§€ ì¤‘ í•˜ë‚˜ë¼ë„ ë‹¤ë¥´ë©´ cross-origin ì´ë¼ê³  í•˜ëŠ” ê²ƒì´ë‹¤.
- ì•„ë˜ëŠ” ëª¨ë‘ ë‹¤ë¥¸ ì¶œì²˜ì´ë‹¤.

|ë‹¤ë¥¸ ìŠ¤í‚´|ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸|ë‹¤ë¥¸ í¬íŠ¸
|:--:|:--:|:--:|
|http://example.com/app1|http://www.example.com|http://example.com:8080
|https://example.com/app2|http://myapp.example.com|http://example.com

## ğŸ”’ `SOP(Same-Origin Policy)`
- ì›¹ì—ì„œëŠ” ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ ì œí•œí•˜ëŠ” ê²ƒê³¼ ê´€ë ¨ëœ ë‘ê°€ì§€ ì •ì±…ì´ ì¡´ì¬í•œë‹¤. í•˜ë‚˜ëŠ” CORS, ë‹¤ë¥¸ í•œê°€ì§€ëŠ” SOP(Same-Origin Policy)ì´ë‹¤.
- SOPëŠ” Same-Originì¸ ê²½ìš°ì—ë§Œ ë¦¬ì†ŒìŠ¤ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ì •ì±…ì´ë‹¤. 
- ì´ë•Œ ì¶œì²˜ê°€ ë‹¤ë¥´ë”ë¼ë„, **CORS ì •ì±…ì„ ì§€í‚¨ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì€ í—ˆìš©í•˜ê¸°ë¡œ í–ˆë‹¤.**

> â“ì™œ ì´ëŸ° ë³´ì•ˆ ê·œì¹™ë“¤ì´ ë§Œë“¤ì–´ì§„ ê²ƒì¸ê°€?
> - ì›¹í˜ì´ì§€ë¥¼ ìƒê°í•´ ë³´ë©´, ëˆ„êµ¬ë‚˜ ê°œë°œì ë„êµ¬ë§Œ ì—´ì–´ë„ ì–´ë–»ê²Œ DOMì´ ì‘ì„±ë˜ì–´ ìˆëŠ”ì§€ì™€ ê°™ì€ ì •ë³´ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 
>- ë”°ë¼ì„œ ì•…ì˜ë¥¼ ê°€ì§€ê³  scriptë“±ì„ ì´ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ë¹¼ê°ˆ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

- ì¶œì²˜ë¥¼ ë¹„êµí•˜ëŠ” ë¡œì§ì€ ì„œë²„ì— êµ¬í˜„ëœ ìŠ¤í™ì´ ì•„ë‹Œ **ë¸Œë¼ìš°ì €ì— êµ¬í˜„ëœ ìŠ¤í™**ì´ë‹¤. 
- ë§Œì•½ CORSì •ì±…ì„ ìœ„ë°˜í•˜ëŠ” ìš”ì²­ì— ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ í•˜ë”ë¼ë„, ë¸Œë¼ìš°ì €ê°€ ì´ ì‘ë‹µì„ ë¶„ì„í•´ì„œ CORSì •ì±…ì— ìœ„ë°˜ë˜ë©´ ê·¸ ì‘ë‹µì€ ì²˜ë¦¬í•˜ì§€ ì•Šê²Œ ëœë‹¤.

â“ ê·¸ëŸ¼ CORSëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ê±¸ê¹Œ?

## ğŸ”’ `CORS`ì˜ ë™ì‘ ì›ë¦¬

1. ê¸°ë³¸ì ìœ¼ë¡œ ì›¹ì€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•ŒëŠ” **`HTTP` í”„ë¡œí† ì½œ**ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­í•˜ëŠ”ë°, ì´ë•Œ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ í—¤ë” (request header)ì— Origin í•„ë“œì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ì¶œì²˜ë¥¼ ë‹´ì•„ ì „ì†¡í•œë‹¤.
2. ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ í•˜ëŠ”ë°, ì‘ë‹µ í—¤ë” (response header)ì— `Access-Control-Allow-Origin`ì´ë¼ëŠ” ê°’ì— 'ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ í—ˆìš©ëœ ì¶œì²˜'ë¥¼ ë‚´ë ¤ì¤€ë‹¤. ì´í›„ ì‘ë‹µì„ ë°›ì€ ë¸Œë¼ìš°ì €ëŠ” ìì‹ ì´ ë³´ëƒˆë˜ ìš”ì²­ì˜ `Origin`ê³¼ ì„œë²„ê°€ ë³´ë‚´ì¤€ ì‘ë‹µì˜ `Access-Control-Allow-Origin`ì„ ë¹„êµí•´ ë³¸ í›„ ì´ ì‘ë‹µì´ ìœ íš¨í•œ ì‘ë‹µì¸ì§€ ì•„ë‹Œì§€ë¥¼ ê²°ì •í•œë‹¤.
- HTTP ë©”ì†Œë“œë“¤ ì¤‘ GET ì´ ì™¸ì˜ ë©”ì†Œë“œë‚˜, POST ë©”ì†Œë“œì—ì„œ íŠ¹ì • MIME Typeì€ ì„œë²„ ë°ì´í„°ì— ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ëŠ” **Preflight Request** ë°©ì‹ìœ¼ë¡œ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ ê·œì œí•œë‹¤.

- CORSëŠ” ì´ 3ê°€ì§€ì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê°€ì§„ë‹¤.

### âœ… `Simple Request`
- ì˜ˆë¹„ ìš”ì²­ ì—†ì´ ë°”ë¡œ ì„œë²„ì—ê²Œ ë³¸ ìš”ì²­ì„ í•œ í›„, ì„œë²„ê°€ ì´ì— ëŒ€í•œ ì‘ë‹µì˜ í—¤ë”ì— `Access-Control-Allow-Origin`ê³¼ ê°™ì€ ê°’ì„ ë³´ë‚´ì£¼ë©´ ê·¸ë•Œ ë¸Œë¼ìš°ì €ê°€ CORS ì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë°©ì‹ì´ë‹¤.
![](https://images.velog.io/images/songjy377/post/88f2a293-b574-4931-8f27-f14aaf962dc8/image.png)
- ì•„ë˜ì˜ ê²½ìš°ì—ë§Œ Simple Request ë°©ì‹ìœ¼ë¡œ ìš”ì²­í•œë‹¤.
>1. HTTP Methodê°€ `GET`, `POST`, `HEAD `ì´ì…‹ ì¤‘ì— í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.
>2.  Fetch ëª…ì„¸ì—ì„œ `"CORS-safelisted request-header"`ë¡œ ì •ì˜í•œ í—¤ë”ë“¤ì¸ `Accept, Accept-Language, Content-Language, Content-Type, DPR, Downlink, Save-Data, Viewport-Width, Width`ë¥¼ ì œì™¸í•œ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.
>3. ë§Œì•½ `Content-Type`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” `application/x-www-form-urlencoded, multipart/form-data, text/plain`ë§Œ í—ˆìš©ëœë‹¤.
- Simple Requestê°€ ì–´ë ¤ìš´ ì´ìœ ëŠ”, 1ë²ˆ ì¡°ê±´ì˜ ê²½ìš° ê·¸ë¦¬ ê¹Œë‹¤ë¡­ì§€ëŠ” ì•Šì§€ë§Œ,
- 2ë²ˆì˜ ëª…ì‹œëœ í—¤ë”ë“¤ì€ ì •ë§ ê¸°ë³¸ì ì¸ í—¤ë”ë“¤ì´ë‹¤. ë³µì¡í•˜ê³  ìƒìš©í™”ëœ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì´ í—¤ë”ë“¤ ì™¸ì— ì¶”ê°€ì ì¸ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ëŠ” ì°¾ê¸° í˜ë“¤ë‹¤. ì¸ì¦ ë™ì‘ì„ ìœ„í•œ `Authoriztion` í—¤ë”ë§Œ í•˜ë”ë¼ë„ ì € ì¡°ê±´ì„ ì§€í‚¬ ìˆ˜ ì—†ë‹¤.
- ì˜¤ëŠ˜ ë‚ ì˜ REST í˜¹ì€ HTTP APIë“¤ì€ `text/xml`ì´ë‚˜ `application/json` ì»¨í…ì¸  íƒ€ì…ì„ ê°€ì§€ë„ë¡ ì„¤ê³„ ë˜ê¸° ë•Œë¬¸ì— ì¡°ê±´ì„ ì¶©ì¡±ì‹œí‚¤ê¸° ì–´ë µë‹¤.

### âœ… `Prefilght Request`
- ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ì„ í•œë²ˆì— ë³´ë‚´ì§€ ì•Šê³  ì˜ˆë¹„ ìš”ì²­ê³¼ ë³¸ ìš”ì²­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ì„œë²„ë¡œ ì „ì†¡í•œë‹¤.
![](https://images.velog.io/images/songjy377/post/06b1f45c-bd63-4d38-b400-dc34387c8aaa/image.png)
-  ì˜ˆë¹„ ìš”ì²­ì„ `Preflight`ë¼ê³  ë¶€ë¥´ê³ , `Preflight`ì—ëŠ” `HTTP` ë©”ì†Œë“œ ì¤‘ `OPTIONS` ë©”ì†Œë“œê°€ ì‚¬ìš©ëœë‹¤. (`Preflight`ì˜ ì—­í• ì€ ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ë¸Œë¼ìš°ì € ìŠ¤ìŠ¤ë¡œ ì´ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì•ˆì „í•œì§€ íŒë‹¨í•˜ëŠ” ê²ƒì´ë‹¤.)
- ìš°ë¦¬ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ `fetch API`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ì—ê²Œ ë¦¬ì†ŒìŠ¤ë¥¼ ë°›ì•„ì˜¤ë¼ëŠ” ëª…ë ¹ì„ ë‚´ë¦¬ë©´ ë¸Œë¼ìš°ì €ëŠ” ì„œë²„ì—ê²Œ ì˜ˆë¹„ ìš”ì²­ì„ ë¨¼ì € ë³´ë‚´ê³ , ì„œë²„ëŠ” ì´ ì˜ˆë¹„ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ í˜„ì¬ ìì‹ ì´ ì–´ë–¤ ê²ƒë“¤ì„ í—ˆìš©í•˜ê³ , ì–´ë–¤ ê²ƒë“¤ì„ ê¸ˆì§€í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ì‘ë‹µ í—¤ë”ì— ë‹´ì•„ì„œ ë¸Œë¼ìš°ì €ì—ê²Œ ë‹¤ì‹œ ë³´ë‚´ì£¼ê²Œ ëœë‹¤.
- ì´í›„ ë¸Œë¼ìš°ì €ëŠ” ìì‹ ì´ ë³´ë‚¸ ì˜ˆë¹„ ìš”ì²­ê³¼ ì„œë²„ê°€ ì‘ë‹µì— ë‹´ì•„ì¤€ í—ˆìš© ì •ì±…ì„ ë¹„êµí•œ í›„, ì´ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹¤ê³  íŒë‹¨ë˜ë©´ ê°™ì€ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë‹¤ì‹œ ë³¸ ìš”ì²­ì„ ë³´ë‚´ê²Œ ëœë‹¤. 
- ì´í›„ ì„œë²„ê°€ ì´ ë³¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ í•˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ìµœì¢…ì ìœ¼ë¡œ ì´ ì‘ë‹µ ë°ì´í„°ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ê²Œ ë„˜ê²¨ì¤€ë‹¤.

[ì½”ë“œ ì¶œì²˜](https://evan-moon.github.io/2020/05/21/about-cors/)
```js
const headers = new Headers({
  'Content-Type': 'text/xml',
});
fetch('https://evanmoon.tistory.com/rss', { headers });
OPTIONS https://evanmoon.tistory.com/rss
```

```http
Accept: */*
Accept-Encoding: gzip, deflate, br
Accept-Language: en->US,en;q=0.9,ko;q=0.8,ja;q=0.7,la;q=0.6
// preflightìš”ì²­ì„ í•  ë•Œ ì‹¤ì œ ìš”ì²­ì—ì„œ ì–´ë–¤ headerë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì„œë²„ì—ê²Œ ì•Œë¦¬ê¸° ìœ„í•´ ì‚¬ìš©
Access-Control-Request-Headers: content-type
// preflight ìš”ì²­ì„ í•  ë•Œ ì‹¤ì œ ìš”ì²­ì—ì„œ ì–´ë–¤ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì„œë²„ì—ê²Œ ì•Œë¦¬ê¸° ìœ„í•´ ì‚¬ìš©
Access-Control-Request-Method: GET
Connection: keep-alive
Host: evanmoon.tistory.com
Origin: https://evan-moon.github.io
Referer: https://evan-moon.github.io/2020/05/21/about-cors/
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: cors
Sec-Fetch-Site: cross-site
```

- ìœ„ `Preflight`ëŠ” ìì‹ ì´ ì˜ˆë¹„ ìš”ì²­ ì´í›„ì— ë³´ë‚¼ ë³¸ ìš”ì²­ì— ëŒ€í•œ ë‹¤ë¥¸ ì •ë³´ë“¤ë„ í•¨ê»˜ í¬í•¨ë˜ì–´ ìˆë‹¤. ì´ë ‡ê²Œ ìš”ì²­ì„ ë³´ë‚´ë©´ ì„œë²„ì—ì„œ `Preflight`ì— ëŒ€í•œ ì‘ë‹µì„ ë³´ë‚¸ë‹¤.

```http
OPTIONS https://evanmoon.tistory.com/rss 200 OK
// ë¸Œë¼ìš°ì €ê°€ í•´ë‹¹ originì´ ìì›ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©. 
// í˜¹ì€ *ì€ credentialsì´ ì—†ëŠ” ìš”ì²­ì— í•œí•´ì„œ ëª¨ë“  originì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë„ë¡ í—ˆìš©í•œë‹¤.
Access-Control-Allow-Origin: https://evanmoon.tistory.com
Content-Encoding: gzip
Content-Length: 699
Content-Type: text/xml; charset=utf-8
Date: Sun, 24 May 2020 11:52:33 GMT
P3P: CP='ALL DSP COR MON LAW OUR LEG DEL'
Server: Apache
Vary: Accept-Encoding
X-UA-Compatible: IE=Edge
```
- ì‘ë‹µ í—¤ë”ì— ìœ íš¨í•œ `Access-Control-Allow-Origin` ê°’ì´ ì¡´ì¬í•˜ë©´, CORS ì •ì±… ìœ„ë°˜ì´ ì•„ë‹ˆë‹¤.

### âœ… `Credentialed Request`
- ì¸ì¦ëœ ìš”ì²­ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” CORSì˜ ê¸°ë³¸ì ì¸ ë°©ì‹ì´ë¼ê¸° ë³´ë‹¤ëŠ” ë‹¤ë¥¸ ì¶œì²˜ ê°„ í†µì‹ ì—ì„œ ì¢€ ë” ë³´ì•ˆì„ ê°•í™”í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ ë¸Œë¼ìš°ì €ê°€ ì œê³µí•˜ëŠ” ë¹„ë™ê¸° ë¦¬ì†ŒìŠ¤ ìš”ì²­ APIì¸ `XMLHttpRequest` ê°ì²´ë‚˜ `fetch API`ëŠ” ë³„ë„ì˜ ì˜µì…˜ ì—†ì´ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤ ì •ë³´ë‚˜ ì¸ì¦ê³¼ ê´€ë ¨ëœ í—¤ë”ë¥¼ í•¨ë¶€ë¡œ ìš”ì²­ì— ë‹´ì§€ ì•ŠëŠ”ë‹¤. ì´ë•Œ ìš”ì²­ì— ì¸ì¦ê³¼ ê´€ë ¨ëœ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì˜µì…˜ì´ ë°”ë¡œ `credentials` ì˜µì…˜ì´ë‹¤. ì˜µì…˜ì€ 3ê°€ì§€ê°€ ìˆë‹¤.

ì˜µì…˜ ê°’|	ì„¤ëª…|
|--|--|
|same-origin (ê¸°ë³¸ê°’)|	ê°™ì€ ì¶œì²˜ ê°„ ìš”ì²­ì—ë§Œ ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤
|include|	ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤
|omit|	ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì§€ ì•ŠëŠ”ë‹¤

- ë§Œì•½ `same-origin`ì´ë‚˜ `include`ì™€ ê°™ì€ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì— ì¸ì¦ ì •ë³´ê°€ í¬í•¨ëœë‹¤ë©´, ì´ì œ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ ë‹¨ìˆœíˆ `Access-Control-Allow-Origin`ë§Œ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¢€ ë” ê¼¼ê¼¼í•˜ê²Œ ê²€ì‚¬í•˜ê²Œ ëœë‹¤.

-ìš”ì²­ì— ì¸ì¦ì •ë³´ê°€ ë‹´ê²¨ìˆëŠ” ìƒíƒœì—ì„œ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ê²Œ ë˜ë©´ ë¸Œë¼ìš°ì €ëŠ” CORSì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë£°ì— ë‹¤ìŒ ë‘ê°€ì§€ë¥¼ ì¶”ê°€í•˜ê²Œ ëœë‹¤.
>- **`Access-Control-Allow-Origin : *` ì´ë©´ ì•ˆ ë˜ë©°, ëª…ì‹œì ì¸ URLì´ì–´ì•¼ í•œë‹¤.**
>- **ì‘ë‹µ í—¤ë”ì—ëŠ” ë°˜ë“œì‹œ `Access-Control-Allow-Credentials:true`ê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤.**

## ğŸ”“ `CORS` í•´ê²° ë°©ë²•

### ğŸ”‘ Access-Control-Allow-Origin ì„¸íŒ…
- HTTP ì‘ë‹µí—¤ë” `Access-Control-Allow-Origin : *` í˜¹ì€ `Access-Control-Allow-Origin: í—ˆìš©í•˜ê³ ì í•˜ëŠ” ë„ë©”ì¸` ê°’ì„ ì£¼ëŠ” ë°©ë²•ì´ë‹¤.
- *ì€ ë³´ì•ˆì  ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ë„ ìˆìœ¼ë‹ˆ ì¶œì²˜ë¥¼ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

### ğŸ”‘ Webpack Dev Serverë¡œ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹±
-í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìëŠ” ëŒ€ë¶€ë¶„ ì›¹íŒ©ê³¼ webpack-dev-serverë¥¼ ì‚¬ìš©í•˜ì—¬ ìì‹ ì˜ ë¨¸ì‹ ì— ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•˜ê²Œ ë˜ëŠ”ë°, ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” í”„ë¡ì‹œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ì•„ì£¼ í¸í•˜ê²Œ CORS ì •ì±…ì„ ìš°íšŒí•  ìˆ˜ ìˆë‹¤.
```js
module.exports = {
  devServer: {
    proxy: {
      '/api': {
        target: 'https://api.evan.com',
        changeOrigin: true,
        pathRewrite: { '^/api': '' },
      },
    }
  }
}
```
- ì´ë ‡ê²Œ ì„¤ì •ì„ í•´ë†“ìœ¼ë©´ ë¡œì»¬ í™˜ê²½ì—ì„œ /apië¡œ ì‹œì‘í•˜ëŠ” URLë¡œ ë³´ë‚´ëŠ” ìš”ì²­ì— ëŒ€í•´ ë¸Œë¼ìš°ì €ëŠ” localhost:8000/apië¡œ ìš”ì²­ì„ ë³´ë‚¸ ê²ƒìœ¼ë¡œ ì•Œê³  ìˆì§€ë§Œ, ì‚¬ì‹¤ ë’¤ì—ì„œ ì›¹íŒ©ì´ https://api.evan.comìœ¼ë¡œ ìš”ì²­ì„ í”„ë¡ì‹±í•´ì£¼ê¸° ë•Œë¬¸ì— ë§ˆì¹˜ CORS ì •ì±…ì„ ì§€í‚¨ ê²ƒì²˜ëŸ¼ ë¸Œë¼ìš°ì €ë¥¼ ì†ì´ë©´ì„œë„ ìš°ë¦¬ëŠ” ì›í•˜ëŠ” ì„œë²„ì™€ ììœ ë¡­ê²Œ í†µì‹ ì„ í•  ìˆ˜ ìˆë‹¤. **ì¦‰, í”„ë¡ì‹±ì„ í†µí•´ CORS ì •ì±…ì„ ìš°íšŒí•  ìˆ˜ ìˆëŠ” ê²ƒ**ì´ë‹¤.
â— ì•„ë¬´ë˜ë„ ì¤‘ê°„ë‹¨ê³„ê°€ ìˆê¸° ë•Œë¬¸ì— ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ë‹¨ì ì´ ìˆë‹¤.

### ğŸ”‘ node.jsì˜ ë¯¸ë“¤ì›¨ì–´ CORS ì¶”ê°€
- ì´ë¯¸ ë§Œë“¤ì–´ì§„ node.js ë¯¸ë“¤ì›¨ì–´ì¤‘ ì´ë¥¼ í•´ê²°í•´ì£¼ëŠ” ë¯¸ë“¤ì›¨ì–´ê°€ ìˆëŠ”ë° ë°”ë¡œ CORSì´ë‹¤.
```js 
npm install --save cors
yarn add cors
```
- ì´ê²ƒì„ ì´ìš©í•˜ë©´ ë”ìš± ê°„ë‹¨í•˜ê²Œ CORSë¥¼ í—ˆê°€í•´ì¤„ ìˆ˜ ìˆë‹¤.
```js
const express = require('express');
const cors = require('cors');

const app = express();

app.use(cors()); // CORS ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€

...
```
- í•˜ì§€ë§Œ ìœ„ì— ì²˜ëŸ¼ í—¤ë”ë¥¼ ì¶”ê°€ í•˜ê±°ë‚˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì ìš©í•˜ë©´ ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ í—ˆê°€ë¥¼ í•˜ê²Œ ëœë‹¤. -> ë³´ì•ˆì ìœ¼ë¡œ ì·¨ì•½í•´ì§ˆ ìˆ˜ ìˆìŒ.

- ê·¸ë˜ì„œ cors ë¯¸ë“¤ì›¨ì–´ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ë¥¼ ì„¤ì •í•  ìˆ˜ê°€ ìˆë‹¤.
```js
( https://www.npmjs.com/package/cors )

const corsOptions = {
    origin: 'http://localhost:3000', // í—ˆë½í•˜ê³ ì í•˜ëŠ” ìš”ì²­ ì£¼ì†Œ
    credentials: true, // trueë¡œ í•˜ë©´ ì„¤ì •í•œ ë‚´ìš©ì„ response í—¤ë”ì— ì¶”ê°€
};

app.use(cors(corsOptions)); // config ì¶”ê°€
```

## ğŸŒŸ Summery
- CORSì´ë€ ë„ë©”ì¸ ë˜ëŠ” í¬íŠ¸ê°€ ë‹¤ë¥¸ ì„œë²„ì˜ ìì›ì„ ìš”ì²­í•˜ë©´ ë°œìƒí•˜ëŠ” ì´ìŠˆì´ë‹¤.
- CORS ì •ì±…ì€ ì¶œì²˜ê°€ ë‹¤ë¥¸ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•  ë•Œ HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¶Œí•œì„ ë¶€ì—¬í•˜ë„ë¡ ë¸Œë¼ìš°ì €ì— ì•Œë ¤ì£¼ëŠ” ì²´ì œë‹¤.
- ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ì•±ì—ì„œëŠ” cross-origin HTTP ìš”ì²­ì„ **ì„œë²„ì—ì„œ** ìŠ¹ì¸í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.
- ì¶œì²˜ë¥¼ ë¹„êµí•˜ëŠ” ìŠ¤í™ì€ **ë¸Œë¼ìš°ì €ì—** êµ¬í˜„ë˜ì–´ ìˆë‹¤.

&lt;reference>
https://developer.mozilla.org/ko/docs/Web/HTTP/CORS
